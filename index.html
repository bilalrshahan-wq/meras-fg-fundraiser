<!-- ... keep your head as-is ... -->

<style>
/* ===== BODY & WRAPPER ===== */
body {height:100vh;overflow:hidden;background:#0b132b;color:white;position:relative;cursor:pointer;}
canvas#stars {position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

/* ===== SHOPS ===== */
.wrapper {display:flex;height:100vh;gap:12px;padding:12px;}
.shop {width:280px;background: rgba(15,20,40,0.85);border-radius:12px;padding:12px;overflow-y:auto;}
.shop h2{text-align:center;margin:6px 0 10px;font-size:18px;}
.shop::-webkit-scrollbar{width:6px;}
.shop::-webkit-scrollbar-thumb{background:#555;border-radius:6px;}
.item {background: rgba(255,255,255,0.06);border-radius:10px;padding:10px;margin-bottom:10px;font-size:13px;}
.item b{font-size:14px;}
.item button{width:100%;margin-top:6px;padding:6px;background:#333;color:white;border:none;border-radius:6px;cursor:pointer;}
.item button:disabled{opacity:0.4;cursor:not-allowed;}

/* ===== CENTER ===== */
.center{flex:1;background: rgba(0,0,0,0.35); border-radius:14px; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; padding:12px;}
.center h1{font-size:28px;margin-bottom:6px;}
.center button{margin-top:12px;padding:14px 24px;font-size:16px;background:#1f3cff;color:white;border:none;border-radius:10px;cursor:pointer;}
.stats{margin-top:10px;font-size:14px;opacity:0.85;}

/* ===== MODAL ===== */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);justify-content:center;align-items:center;z-index:100;}
.modal-content{background:#111;padding:20px;border-radius:12px;max-width:600px;width:90%;text-align:center;position:relative;}
.modal-content button.close{position:absolute;top:10px;right:10px;background:red;color:white;padding:4px 8px;border:none;border-radius:6px;cursor:pointer;}
.modal-content button{margin-top:12px;}
</style>

<body>
<canvas id="stars"></canvas>
<div class="wrapper">
  <div class="shop" id="autoShop"><h2>Auto Clicker Shop</h2></div>
  <div class="center">
    <h1>Meras FG Fundraiser</h1>
    <div class="stats">Click anywhere to get free FG</div>
    <div class="stats"><b>FG:</b> <span id="fg">0</span></div>
    <div class="stats">FG/sec: <span id="fgps">0</span></div>
    <div class="stats">Click Multiplier: x<span id="multi">1</span></div>
    <button id="gamesBtn">Games Menu üéÆ</button>
    <button onclick="openGamble()">Gamble üé≤</button>
    <button onclick="openLeaderboard()">Leaderboard üèÜ</button>
  </div>
  <div class="shop" id="multiShop"><h2>Click Multipliers</h2></div>
  <div class="shop" id="potionShop"><h2>Potions Shop</h2></div>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <div class="modal-content" id="modalContent">
    <button class="close" onclick="closeModal()">X</button>
    <h2 id="modalTitle">Modal</h2>
    <div id="modalBody"></div>
  </div>
</div>

<script>
// ===== CORE VARIABLES =====
let fg=0, fgps=0, multiplier=1;
let activePotion=null;

// ===== SAVE SYSTEM =====
function save(){localStorage.setItem("fgGame",JSON.stringify({fg,fgps,multiplier,activePotion}));}
function load(){const data=JSON.parse(localStorage.getItem("fgGame"));if(data){fg=data.fg;fgps=data.fgps;multiplier=data.multiplier;activePotion=data.activePotion;}}
load();

// ===== UI ELEMENTS =====
const fgEl=document.getElementById("fg");
const fgpsEl=document.getElementById("fgps");
const multiEl=document.getElementById("multi");
function updateUI(){fgEl.textContent=formatNumber(fg);fgpsEl.textContent=formatNumber(fgps);multiEl.textContent=formatNumber(multiplier);save();}

// ===== CLICK =====
document.body.addEventListener('click',e=>{ if(e.target.tagName!=="BUTTON") clickFG(); });
function clickFG(){fg+=multiplier;updateUI();}

// ===== SHOPS =====
const autos=[["Mera",1,25],["Tom",3,100],["F5",8,300],["PRX",18,750]];
const autoShop=document.getElementById("autoShop");
autos.forEach(a=>{
  const div=document.createElement("div"); div.className="item";
  div.innerHTML=`<b>${a[0]}</b><br>+${formatNumber(a[1])} FG/sec<br>Cost: ${formatNumber(a[2])}<button>Buy</button>`;
  div.querySelector("button").addEventListener('click',()=>{if(fg>=a[2]){fg-=a[2];fgps+=a[1];updateUI();}});
  autoShop.appendChild(div);
});

const mults=[["4 inb",2,5000],["3 walls",3,12000]];
const multiShop=document.getElementById("multiShop");
mults.forEach(m=>{
  const div=document.createElement("div"); div.className="item";
  div.innerHTML=`<b>${m[0]}</b><br>x${formatNumber(m[1])} clicks<br>Cost: ${formatNumber(m[2])}<button>Buy</button>`;
  div.querySelector("button").addEventListener('click',()=>{if(fg>=m[2]){fg-=m[2];multiplier=m[1];updateUI();}});
  multiShop.appendChild(div);
});

// ===== POTIONS SHOP =====
const potions=[["√ó10 Multiplier (30s)",10,500000,30000],["√ó5 Multiplier (1min)",5,250000,60000]];
const potionShop=document.getElementById("potionShop");
potions.forEach(p=>{
  const div=document.createElement("div"); div.className="item";
  div.innerHTML=`<b>${p[0]}</b><br>Cost: ${formatNumber(p[2])}<button>Buy</button>`;
  div.querySelector("button").addEventListener('click',()=>{
    if(fg>=p[2]){
      fg-=p[2]; activePotion={mult:p[1],end:Date.now()+p[3]}; multiplier*=p[1]; updateUI();
      setTimeout(()=>{multiplier/=p[1]; activePotion=null; updateUI();},p[3]);
    }
  });
  potionShop.appendChild(div);
});

// ===== AUTO LOOP =====
setInterval(()=>{
  fg+=fgps*multiplier;
  if(activePotion&&Date.now()>activePotion.end){multiplier/=activePotion.mult; activePotion=null;}
  updateUI();
},1000);

// ===== FORMAT NUMBERS =====
function formatNumber(num){if(num>=1e12)return (num/1e12).toFixed(2)+"T";if(num>=1e9)return (num/1e9).toFixed(2)+"B";if(num>=1e6)return (num/1e6).toFixed(2)+"M";if(num>=1e3)return (num/1e3).toFixed(1)+"K";return Math.floor(num);}

// ===== MODAL =====
const modal=document.getElementById("modal");
function openModal(title,body){modal.style.display="flex";document.getElementById("modalTitle").textContent=title;document.getElementById("modalBody").innerHTML=body;}
function closeModal(){modal.style.display="none";}

// ===== LEADERBOARD =====
function openLeaderboard(){
  let lb=JSON.parse(localStorage.getItem("fgLeaderboard"))||[];
  lb.push({name:"You",fg:fg});
  lb.sort((a,b)=>b.fg-a.fg);
  if(lb.length>5) lb=lb.slice(0,5);
  localStorage.setItem("fgLeaderboard",JSON.stringify(lb));
  let html="<ol>";
  lb.forEach(e=> html+=`<li>${e.name}: ${formatNumber(e.fg)} FG</li>`);
  html+="</ol><p>Top 5 reward: 100 Robux!</p>";
  openModal("Leaderboard üèÜ",html);
}

// ===== GAMES BUTTON FIX =====
const gamesBtn=document.getElementById("gamesBtn");
gamesBtn.addEventListener('click',openGames);
const games=[{name:"Coin Flip",func:coinFlip},{name:"Dice Roll",func:diceRoll}];
function openGames(){
  const ul=document.createElement("ul");
  games.forEach((g,i)=>{
    const li=document.createElement("li");
    const btn=document.createElement("button");
    btn.textContent=g.name;
    btn.addEventListener('click',()=>{closeModal(); g.func();});
    li.appendChild(btn); ul.appendChild(li);
  });
  const div=document.createElement("div"); div.appendChild(ul);
  openModal("Games Menu üéÆ",div.innerHTML);
}

// ===== MINI GAME PLACEHOLDER =====
function coinFlip(){openModal("Coin Flip","<p>Heads or Tails!</p>");}
function diceRoll(){openModal("Dice Roll","<p>Roll the dice!</p>");}

// ===== STARFIELD GALAXY BACKGROUND =====
const canvas=document.getElementById("stars");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

const stars=[];
for(let i=0;i<300;i++){
  stars.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:Math.random()*1.5+0.5,
    speed:Math.random()*0.3+0.1,
    color:`hsl(${Math.random()*360},70%,80%)`
  });
}
function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const gradient=ctx.createRadialGradient(canvas.width/2,canvas.height/2,0,canvas.width/2,canvas.height/2,canvas.width/1.2);
  gradient.addColorStop(0,"#0b132b");
  gradient.addColorStop(1,"#090a1a");
  ctx.fillStyle=gradient; ctx.fillRect(0,0,canvas.width,canvas.height);

  stars.forEach(s=>{
    ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fillStyle=s.color; ctx.fill();
    s.y+=s.speed; if(s.y>canvas.height) s.y=0;
  });
  requestAnimationFrame(drawStars);
}
drawStars();

updateUI();
</script>
</body>
